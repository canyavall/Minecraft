# Spark Profiler Properties for Xeenaa Fabric Enhancements
# These properties override the YAML configuration for easier customization

# === Core Sampling Settings ===
spark.sampling.interval=2
spark.sampling.timeout=30000
spark.sampling.thread-dumper.enabled=true

# === Web Interface Settings ===
spark.web.enabled=true
spark.web.port=4567
spark.web.host=0.0.0.0
spark.web.compression=true

# === Performance Thresholds ===
# TPS monitoring
spark.monitoring.tps.enabled=true
spark.monitoring.tps.alert-threshold=18.0
spark.monitoring.tps.window-size=100

# Memory monitoring
spark.monitoring.memory.enabled=true
spark.monitoring.memory.alert-threshold-mb=7168
spark.monitoring.memory.gc-monitoring=true

# Chunk performance monitoring
spark.monitoring.chunks.enabled=true
spark.monitoring.chunks.slow-load-threshold-ms=50
spark.monitoring.chunks.very-slow-load-threshold-ms=200
spark.monitoring.chunks.track-cache=true

# === Auto-Profiling Settings ===
spark.auto-profiling.enabled=true

# Low TPS auto-profiling
spark.auto-profiling.low-tps.enabled=true
spark.auto-profiling.low-tps.threshold=18.0
spark.auto-profiling.low-tps.duration=30
spark.auto-profiling.low-tps.cooldown=300

# High memory auto-profiling
spark.auto-profiling.high-memory.enabled=true
spark.auto-profiling.high-memory.threshold-mb=7168
spark.auto-profiling.high-memory.duration=60
spark.auto-profiling.high-memory.cooldown=600

# Slow chunk auto-profiling
spark.auto-profiling.slow-chunks.enabled=true
spark.auto-profiling.slow-chunks.threshold-ms=200
spark.auto-profiling.slow-chunks.duration=30
spark.auto-profiling.slow-chunks.cooldown=180

# === Export Settings ===
spark.export.auto-export=true
spark.export.format=html
spark.export.directory=performance/spark-profiles
spark.export.retention-days=7
spark.export.compress=true

# === Performance Settings ===
spark.performance.max-overhead-percent=1.0
spark.performance.sampler-thread-priority=3
spark.performance.buffer-size=8192
spark.performance.max-stack-depth=300

# === Integration Settings ===
spark.integration.micrometer.enabled=true
spark.integration.micrometer.export-interval=30
spark.integration.custom-metrics.enabled=true

# === Logging Settings ===
spark.logging.level=INFO
spark.logging.log-profiling-sessions=true
spark.logging.log-auto-triggers=true
spark.logging.log-performance-alerts=true

# === Environment-Specific Overrides ===
# Uncomment for development environment
# spark.sampling.interval=1
# spark.monitoring.chunks.slow-load-threshold-ms=25
# spark.logging.level=DEBUG

# Uncomment for production environment
# spark.sampling.interval=5
# spark.web.require-auth=true
# spark.logging.level=WARN
# spark.auto-profiling.low-tps.cooldown=600